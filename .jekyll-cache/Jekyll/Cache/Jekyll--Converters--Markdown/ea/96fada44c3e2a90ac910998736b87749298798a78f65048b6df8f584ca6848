I"î’<p>Este post fez um exerc√≠cio de previs√£o para o Impeachment brasileiro utilizando um modelo de regress√£o particionada atrav√©s do uso de √°rvores. As previs√µes foram atualizadas diariamente e o resultado percentual se referia √† propor√ß√£o de Deputados a favor do Impeachment em rela√ß√£o a totalidade dos membros, considerando diferentes √≠ndices de aus√™ncia.</p>

<p>Com objetivos did√°ticos, publiquei o modelo no dia 1¬∫ de abril e foi o primeiro do g√™nero que apareceu na internet. Desde o in√≠cio, as previs√µes indicavam grande probabilidade de o Impeachment passar pela etapa de julgamento de admissibilidade na C√¢mara com cerca de 70% a 75% de votos favor√°veis, variando de acordo com a mudan√ßa dos dados/fonte. A √∫ltima atualiza√ß√£o do modelo e o resultado final podem ser vistos abaixo:</p>

<h4 id="previs√£o-com-dados-do-vem-pra-rua">Previs√£o com dados do Vem Pra Rua</h4>

<table>
  <tbody>
    <tr>
      <td><strong>Aus√™ncia</strong></td>
      <td><strong>0%</strong></td>
      <td><strong>2,5%</strong></td>
      <td><strong>5%</strong></td>
      <td><strong>7,5%</strong></td>
      <td><strong>10%</strong></td>
    </tr>
    <tr>
      <td><strong>Estimativa final</strong></td>
      <td>71,73%</td>
      <td>69,20%</td>
      <td>69,00%</td>
      <td>66,67%</td>
      <td>64,91%</td>
    </tr>
    <tr>
      <td><strong>Resultado:</strong></td>
      <td>A favor</td>
      <td>A favor</td>
      <td>A favor</td>
      <td>A favor</td>
      <td>Contra</td>
    </tr>
  </tbody>
</table>

<p><em>Dados obtidos em:</em> 16/04/2016 √†s 16:00 (√∫ltimo arquivo <a href="/files/imp_last.csv">aqui</a>)</p>

<p><strong>Resultado Final:</strong> 367 de 513 votos favor√°veis -&gt; 71,54% (A favor)</p>

<p><strong>Taxa de aus√™ncia:</strong> 2 de 513 deputados -&gt; 0,39%</p>

<p>Como pode ser visto, a estimativa final indicava cerca de 368 votos favor√°veis com taxa pr√≥xima de 0% de aus√™ncia e o resultado final foi de 367 com taxa de aus√™ncia de 0,39%. Assim, apesar das limita√ß√µes do modelo, ele fez um excelente trabalho em prever o resultado final do processo de Impeachment na C√¢mara brasileira.</p>

<p>O modelo, apesar de parecer complicado, intuitivamente √© bem simples, ele apenas considerava a informa√ß√£o partid√°ria e do Estado dos Deputados que j√° haviam manifestado voto e a partir da√≠ constru√≠a uma √°rvore com as divis√µes entre partido e Estado para inferir sobre os votos dos indecisos. Muitas limita√ß√µes foram levantadas a respeito do modelo, as quais, em boa parte, eu concordava. Um exemplo √© o fato de ele n√£o captar a barganha e o jogo pol√≠tico por tr√°s das decis√µes. Entretanto, na semana que antecedeu o Impeachment, a din√¢mica da defini√ß√£o dos votos acabou se dando primeiro atrav√©s de uma delibera√ß√£o dentro do partido e posteriormente pelo apoio dos Deputados √† decis√£o da maioria, com apenas alguns dissidentes. Como o pressuposto do modelo era de que os Deputados seguiriam a orienta√ß√£o partid√°ria, ent√£o ele acabou se mostrando bem eficaz na previs√£o dos votos. Tamb√©m o Estado do Deputado teve um peso grande nas manifesta√ß√µes de voto. Afinal, parece que a pol√≠tica brasileira n√£o era t√£o complicada de se entender!</p>

<p>Ap√≥s a publica√ß√£o, o modelo fez bastante sucesso entre estudantes e acad√™micos e acabou ganhando notoriedade na m√≠dia. Conforme as atualiza√ß√µes eram feitas, novas not√≠cias apareciam. Algumas repercuss√µes foram:</p>

<p><strong>Artigos em jornais</strong></p>

<p><a href="http://www1.folha.uol.com.br/poder/2016/04/1759144-estatistico-preve-72-de-votos-favoraveis-a-impeachment-de-dilma.shtml">Folha de S√£o Paulo 1</a></p>

<p><a href="http://www1.folha.uol.com.br/poder/2016/04/1760475-sobe-para-90-a-chance-do-processo-de-impeachment-passar-na-camara.shtml">Folha de S√£o Paulo 2</a></p>

<p><a href="http://www1.folha.uol.com.br/poder/2016/04/1760838-chance-de-processo-de-impeachment-passar-na-camara-sobe-para-92.shtml">Folha de S√£o Paulo 3</a></p>

<p><a href="http://veja.abril.com.br/blog/reinaldo/geral/sobe-para-90-a-chance-do-processo-de-impeachment-passar-na-camara/">Veja</a></p>

<p><a href="http://www.osul.com.br/estatistico-preve-72-de-votos-pro-impeachment-de-dilma-rousseff/">Jornal O Sul</a></p>

<p><a href="http://www.folhapolitica.org/2016/04/sobe-para-90-chance-do-processo-de.html">Folha Pol√≠tica</a></p>

<p><a href="https://www.nexojornal.com.br/expresso/2016/04/12/A-aposta-de-estat%C3%ADsticos-e-professores-para-a-vota%C3%A7%C3%A3o-do-impeachment">Jornal Nexo</a></p>

<p><a href="http://www.informativo.com.br/site/noticia/visualizar/id/79164/?Previsao-aponta-para-aprovacao-do-impeachment-entre-deputados.html">O Informativo</a></p>

<p><strong>Entrevistas em r√°dios:</strong></p>

<p>R√°dio Bandeirantes</p>

<p>R√°dio Jovem Pan SP</p>

<p>R√°dio Can√ß√£o Nova.</p>

<p>Sobre a vota√ß√£o no Senado, para a admissibilidade √© necess√°rio maioria simples, e para o julgamento √© necess√°rio 2/3. Decidi por enquanto n√£o manter as atualiza√ß√µes da previs√£o para o Senado pelos seguintes motivos:</p>

<ol>
  <li>
    <p>J√° √© praticamente certo que a vota√ß√£o ter√° maioria simples, pois j√° h√° manifesta√ß√£o de mais de 50% da Casa a favor do Impeachment;</p>
  </li>
  <li>
    <p>Ap√≥s a admissibilidade no Senado passar, a Presidente ser√° destitu√≠da por 180 dias antes do julgamento final, o que √© um grande per√≠odo de tempo, podendo ocorrer muitos fatos pol√≠ticos relevantes at√© l√°;</p>
  </li>
</ol>

<p>Caso aparente ser necess√°rio, poderei incluir algumas proje√ß√µes para o Senado quando o julgamento se aproximar.</p>

<p>Ap√≥s a publica√ß√£o deste post, recebi in√∫meras sugest√µes, contribui√ß√µes e apoio. Gostaria de agradecer principalmente o empenho do Prof. Cl√°udio Shikida na divulga√ß√£o, as sugest√µes dadas pelo Gabriel Torres, Prof. Bruno Speck, membros da comunidade de usu√°rios do R, entre outras pessoas. Ao Fernando Barbosa por me disponibilizar os dados do Estad√£o atrav√©s de uma macro em VBA, ao Adriano Filho por traduzir o meu script de coleta dos dados de Python para R. Ao Datafolha por me disponibilizar os dados antecipadamente para an√°lise. E a todas as outras pessoas que ajudaram na divulga√ß√£o do trabalho. Achei muito gratificante a repercuss√£o que o post teve pois a maior parte dos trabalhos ou consultorias que aparecem na m√≠dia n√£o disponibilizam a metodologia ou as etapas para replica√ß√£o das proje√ß√µes feitas. Acredito que estamos em uma nova era da ci√™ncia, em que a produ√ß√£o de conhecimento deve estar aberta para o escrut√≠nio do p√∫blico, possibilitando assim a cr√≠tica detalhada do m√©todo, e com isso melhorando o resultado e objetivo final do exerc√≠cio. Entendo que muitas pessoas somente l√™em as manchetes, mas pelo menos desta vez havia um link nas reportagens que levava a este post, que mostra as etapas para replica√ß√£o dos resultados obtidos. Para finalizar, obrigado a todos e aproveitem a leitura!</p>

<p style="text-align: right">22 de abril de 2016</p>

<p style="text-align: right">Regis A. Ely</p>

<h2 id="cen√°rio-do-impeachment">Cen√°rio do Impeachment</h2>

<p><strong>Nota:</strong> <em>A Tabela acima cont√©m a √∫ltima atualiza√ß√£o da previs√£o feita, mas o post abaixo, bem como todas as informa√ß√µes nele, s√£o referentes a 1¬∫ de abril.</em></p>

<p>A favor ou contra? Parece que todo cidad√£o brasileiro j√° tem uma opini√£o formada sobre o Impeachment, com exce√ß√£o dos pol√≠ticos, que est√£o um tanto indecisos. O site <strong><a href="http://mapa.vemprarua.net/br/">vem pra rua</a></strong> fez um servi√ßo de utilidade p√∫blica ao elencar a inten√ß√£o de voto de todos os deputados e senadores brasileiros. Mas a verdade √© que ainda resta muita d√∫vida sobre qual ser√° o resultado dessa vota√ß√£o. Uma vez que os dados est√£o dispon√≠veis, podemos tentar realizar uma tarefa quase imposs√≠vel: prever qual ser√° o desfecho da situa√ß√£o pol√≠tica brasileira. Para isso vamos utilizar um simples modelo de regress√£o baseado em √°rvores, implementado no pacote <a href="https://cran.r-project.org/web/packages/rpart/vignettes/longintro.pdf"><code class="highlighter-rouge">rpart</code></a> do <strong><a href="https://www.r-project.org/">R</a></strong>. Primeiro vamos aos fatos:</p>

<ol>
  <li>
    <p>Atualmente temos 513 deputados e 81 senadores no Brasil;</p>
  </li>
  <li>
    <p>O processo de Impeachment pode ser dividido em duas etapas: o ju√≠zo de admissibilidade e o julgamento do impedimento;</p>
  </li>
  <li>
    <p>Para o pedido ser admitido √© necess√°rio 2/3 de votos favor√°veis na C√¢mara dos Deputados e 1/2 de votos favor√°veis no Senado Federal;</p>
  </li>
  <li>
    <p>Para o impedimento da Presidente √© necess√°rio 2/3 de votos favor√°veis no Senado Federal;</p>
  </li>
  <li>
    <p>Considerando os n√∫meros, para termos um novo Presidente √© necess√°rio que 342 Deputados e 41 Senadores sejam favor√°veis a admissibilidade, e que 54 Senadores sejam favor√°veis ao impedimento (cr√©dito ao Gabriel Torres por lembrar das recentes mudan√ßas feitas pelo STF).</p>
  </li>
</ol>

<p>Para conhecer um pouco mais sobre o processo de Impeachment voc√™ pode ler a <strong><a href="http://presrepublica.jusbrasil.com.br/legislacao/128811/lei-do-Impeachment-lei-1079-50">legisla√ß√£o</a></strong>.</p>

<h2 id="obtendo-os-dados">Obtendo os dados</h2>

<p>Como a pol√≠tica brasileira √© mais imprevis√≠vel que epis√≥dio de Game of Thrones, vale a pena automatizar a coleta de dados para podermos atualizar constantemente a previs√£o - neste exato momento em que escrevo este post j√° ocorreram mudan√ßas na inten√ß√£o de voto de 2 Deputados. Para isso, escrevi um pequeno script em <strong><a href="https://www.python.org/">Python2.7</a></strong> que coleta os dados do site <strong><a href="http://mapa.vemprarua.net/br/">vem pra rua</a></strong> e grava em um arquivo csv com o nome <a href="/files/imp.csv"><code class="highlighter-rouge">imp.csv</code></a>, deixando-o pronto para ser analisado no R. Voc√™ pode ver este script <strong><a href="https://gist.github.com/regisely/caefdf30313503bbf5d0bbae6e2a597d">aqui</a></strong>. Se estiver interessado em um script que faz o mesmo para R, voc√™ pode ver a vers√£o feita pelo Adriano Azevedo Filho <a href="http://rpubs.com/adriano/dadosImpP1">aqui</a>.</p>

<p>Uma vez obtidos os dados podemos carreg√°-lo no R digitando:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"imp.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">";"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Aqui est√£o as primeiras 10 observa√ß√µes:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      Voto                   Nome Partido Estado Senador
1  A favor            Aecio Neves    PSDB     MG       1
2  A favor Aloysio Nunes Ferreira    PSDB     SP       1
3  A favor            Alvaro Dias      PV     PR       1
4  A favor             Ana Amelia      PP     RS       1
5  A favor      Antonio Anastasia    PSDB     MG       1
6  A favor       Ataides Oliveira    PSDB     TO       1
7  A favor           Blairo Maggi      PR     MT       1
8  A favor      Cassio Cunha Lima    PSDB     PB       1
9  A favor      Cristovam Buarque     PPS     DF       1
10 A favor          Dalirio Beber    PSDB     SC       1
</code></pre></div></div>

<p>A vari√°vel <em>Voto</em> cont√©m tr√™s poss√≠veis valores: ‚ÄúA favor‚Äù, ‚ÄúContra‚Äù ou em branco (indecisos). J√° a vari√°vel <em>Senador</em> √© uma dummy que √© igual a um quando o pol√≠tico √© Senador e zero quando √© Deputado. As outras tr√™s vari√°veis s√£o o <em>Nome</em>, o <em>Partido</em> e o <em>Estado</em>.</p>

<p>Para prevermos o resultado do Impeachment vamos utilizar o m√©todo de regress√£o com particionamento recursivo, implementado pelo pacote <a href="https://cran.r-project.org/web/packages/rpart/vignettes/longintro.pdf"><code class="highlighter-rouge">rpart</code></a>. A ideia √© que podemos separar as decis√µes dos pol√≠ticos em grupos baseados em seus Partidos e Estados. Esse m√©todo √© ideal para o caso brasileiro, pois sabemos que existem cis√µes entre os partidos brasileiros dependendo do Estado.</p>

<h2 id="implementa√ß√£o-do-modelo">Implementa√ß√£o do modelo</h2>

<p>Uma vez carregados os dados na vari√°vel <code class="highlighter-rouge">data</code>, vamos ler o pacote <code class="highlighter-rouge">rpart</code>, criar algumas novas vari√°veis que ser√£o √∫teis e fazer pequenos ajustes:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"rpart"</span><span class="p">)</span><span class="w"> </span><span class="c1"># instale o pacote rpart caso n√£o o tenha feito</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rpart</span><span class="p">)</span><span class="w">

</span><span class="c1"># Transforma os indecisos em NA</span><span class="w">
</span><span class="n">data</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">Voto</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">''</span><span class="p">),</span><span class="s2">"Voto"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">data</span><span class="o">$</span><span class="n">Voto</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">droplevels</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">Voto</span><span class="p">)</span><span class="w">

</span><span class="c1"># Cria vari√°veis para os senadores e deputados</span><span class="w">
</span><span class="n">senadores</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">Senador</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">),]</span><span class="w">
</span><span class="n">deputados</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">Senador</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">),]</span><span class="w">
</span><span class="n">n_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">senadores</span><span class="p">)</span><span class="w"> </span><span class="c1"># n√∫mero de senadores</span><span class="w">
</span><span class="n">n_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">deputados</span><span class="p">)</span><span class="w"> </span><span class="c1"># n√∫mero de deputados</span><span class="w">

</span><span class="c1"># Separa deputados indecisos e decididos</span><span class="w">
</span><span class="n">train_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">na.omit</span><span class="p">(</span><span class="n">deputados</span><span class="p">)</span><span class="w"> </span><span class="c1"># deputados decididos</span><span class="w">
</span><span class="n">test_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">deputados</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">deputados</span><span class="o">$</span><span class="n">Voto</span><span class="p">)),]</span><span class="w"> </span><span class="c1"># deputados indecisos</span><span class="w">
</span><span class="n">train_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">na.omit</span><span class="p">(</span><span class="n">senadores</span><span class="p">)</span><span class="w"> </span><span class="c1"># senadores decididos</span><span class="w">
</span><span class="n">test_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">senadores</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">senadores</span><span class="o">$</span><span class="n">Voto</span><span class="p">)),]</span><span class="w"> </span><span class="c1"># senadores indecisos</span><span class="w">
</span></code></pre></div></div>

<p>Note que chamamos o conjunto dos Senadores e Deputados que j√° est√£o decididos de <strong>train</strong>, pois estes ser√£o os dados utilizados para treinar nosso modelo. Posteriormente, aplicaremos os resultados do modelo nos dados denominados <strong>test</strong>, que √© o conjunto dos pol√≠ticos indecisos, e ent√£o teremos nossa previs√£o.</p>

<p>Para estimar o modelo digitamos:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Estima√ß√£o do modelo</span><span class="w">
</span><span class="n">formula</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Voto</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">Partido</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Estado</span><span class="w"> </span><span class="c1"># o voto √© fun√ß√£o do Partido e Estado</span><span class="w">
</span><span class="n">fit_dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rpart</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"class"</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">train_dep</span><span class="p">)</span><span class="w">
</span><span class="n">fit_sen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rpart</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"class"</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">train_sen</span><span class="p">)</span><span class="w">
</span><span class="n">fit_dep</span><span class="w">
</span><span class="n">fit_sen</span><span class="w">
</span></code></pre></div></div>

<p>Ao avaliar os resultados da vari√°vel <code class="highlighter-rouge">fit_dep</code>, obtemos os n√≥dulos de divis√£o para os Deputados:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>n= 384 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 384 119 A favor (0.69010417 0.30989583)  
   2) Partido=DEM,PEN,PHS,PMDB,PP,PPS,PR,PRB,PROS,PSB,PSC,PSD,PSDB,PSL,PTB,PTdoB,PTN,PV,REDE,SD 299  36 A favor (0.87959866 0.12040134)  
     4) Estado=AC,AL,DF,ES,GO,MG,MS,RJ,RO,RS,SC,SP 174   4 A favor (0.97701149 0.02298851) *
     5) Estado=AM,AP,BA,CE,MA,MT,PA,PB,PE,PI,PR,RN,RR,SE,TO 125  32 A favor (0.74400000 0.25600000)  
      10) Partido=DEM,PHS,PPS,PRB,PSB,PSC,PSD,PSDB,PSL,PV,REDE,SD 75   4 A favor (0.94666667 0.05333333) *
      11) Partido=PEN,PMDB,PP,PR,PROS,PTB,PTdoB,PTN 50  22 Contra (0.44000000 0.56000000)  
        22) Estado=AM,BA,CE,PE,PR,RN,TO 35  15 A favor (0.57142857 0.42857143)  
          44) Partido=PEN,PMDB,PR,PTB 20   5 A favor (0.75000000 0.25000000) *
          45) Partido=PP,PROS,PTdoB,PTN 15   5 Contra (0.33333333 0.66666667) *
        23) Estado=MA,MT,PA,PB,PI,RR,SE 15   2 Contra (0.13333333 0.86666667) *
   3) Partido=PCdoB,PDT,PSOL,PT 85   2 Contra (0.02352941 0.97647059) *&gt; fit_dep
</code></pre></div></div>

<p>Parece complicado, mas uma maneira mais f√°cil de visualizar estes n√≥dulos √© graficamente. Para isso utilizamos a fun√ß√£o <code class="highlighter-rouge">plot</code> no R. Para construirmos √°rvores mais bonitas utilizamos a fun√ß√£o <code class="highlighter-rouge">text</code> com alguns argumentos especiais (digite <code class="highlighter-rouge">?plot.rpart</code> no R para mais informa√ß√µes).</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plota √°rvore dos deputados decididos</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">fit_dep</span><span class="p">,</span><span class="w"> </span><span class="n">uniform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"√Årvore do Impeachment - C√¢mara (decididos)"</span><span class="p">,</span><span class="w"> </span><span class="n">margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.2</span><span class="p">)</span><span class="w">
</span><span class="n">text</span><span class="p">(</span><span class="n">fit_dep</span><span class="p">,</span><span class="w"> </span><span class="n">use.n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">,</span><span class="w"> </span><span class="n">pretty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">fancy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">minlength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">bg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">)</span><span class="w">
</span><span class="n">mtext</span><span class="p">(</span><span class="s2">"Valores s√£o: A favor/Contra"</span><span class="p">,</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="c1"># Plota √°rvore dos senadores decididos</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">fit_sen</span><span class="p">,</span><span class="w"> </span><span class="n">uniform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"√Årvore do Impeachment - Senado (decididos)"</span><span class="p">,</span><span class="w"> </span><span class="n">margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.2</span><span class="p">)</span><span class="w">
</span><span class="n">text</span><span class="p">(</span><span class="n">fit_sen</span><span class="p">,</span><span class="w"> </span><span class="n">use.n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">,</span><span class="w"> </span><span class="n">pretty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">fancy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">minlength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">bg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">)</span><span class="w">
</span><span class="n">mtext</span><span class="p">(</span><span class="s2">"Valores s√£o: A favor/Contra"</span><span class="p">,</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Assim, obtemos os seguintes gr√°ficos:</p>

<p><img src="http://localhost:4000/images/tree_dep.png" alt="" /></p>

<p><img src="http://localhost:4000/img/tree_sen.png" alt="" /></p>

<p>Ainda assim n√£o √© t√£o simples, mas quem disse que a pol√≠tica brasileira era f√°cil de entender. Vamos primeiro analisar o Congresso. Repare que no primeiro n√≥dulo h√° uma divis√£o partid√°ria, com o grupo PCdoB, PDT, PSOL e PT de um lado, sendo que 2 Deputados s√£o a favor e 83 contra o Impeachment. No resto dos partidos, existem divis√µes de acordo com o Estado. No grupo AC,AL,DF,ES,GO,MG,MS,RJ,RO,RS,SC,SP temos 170 Deputados a favor e apenas 4 contra, mas no restante dos Estados h√° divis√µes partid√°rias e por regi√£o. Resumindo, me parece que os partidos est√£o mais rachados nos Estados do Nordeste. No Senado a divis√£o √© mais simples e parece ser explicada bastante pelo Estado do Senador.</p>

<h2 id="previs√£o-dos-votos-indecisos">Previs√£o dos votos indecisos</h2>

<p>Ap√≥s estimar o modelo podemos calcular a acur√°cia do mesmo utilizando as fun√ß√µes <code class="highlighter-rouge">printcp()</code> e <code class="highlighter-rouge">plotcp()</code>. Uma maneira r√°pida de obter a acur√°cia do modelo no conjunto <em>train</em> √© digitando:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Acur√°cia no conjunto train para Deputados</span><span class="w">
</span><span class="n">prev_class_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">table</span><span class="p">(</span><span class="n">predict</span><span class="p">(</span><span class="n">fit_dep</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"class"</span><span class="p">),</span><span class="w"> </span><span class="n">train_dep</span><span class="o">$</span><span class="n">Voto</span><span class="p">)</span><span class="w">
</span><span class="nf">sum</span><span class="p">(</span><span class="n">diag</span><span class="p">(</span><span class="n">prev_class_dep</span><span class="p">))</span><span class="o">/</span><span class="nf">sum</span><span class="p">(</span><span class="n">prev_class_dep</span><span class="p">)</span><span class="w">

</span><span class="c1"># Acur√°cia no conjunto train para Senadores</span><span class="w">
</span><span class="n">prev_class_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">table</span><span class="p">(</span><span class="n">predict</span><span class="p">(</span><span class="n">fit_sen</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"class"</span><span class="p">),</span><span class="w"> </span><span class="n">train_sen</span><span class="o">$</span><span class="n">Voto</span><span class="p">)</span><span class="w">
</span><span class="nf">sum</span><span class="p">(</span><span class="n">diag</span><span class="p">(</span><span class="n">prev_class_sen</span><span class="p">))</span><span class="o">/</span><span class="nf">sum</span><span class="p">(</span><span class="n">prev_class_sen</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>O resultado √©:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 0.9402597 # Deputados
[1] 0.9032258 # Senadores
</code></pre></div></div>

<p>Entretanto, ao utilizar uma estrutura muito complicada para o nosso modelo, podemos acabar cometendo o erro de <em>overfitting</em> em nossa previs√£o. Para evitar isso, devemos verificar qual a estrutura de √°rvores que gera o menor erro de previs√£o em um conjunto independente, chamado <em>cross-validated</em>. Para obter a acur√°cia do modelo de previs√£o nesse conjunto no caso dos Deputados podemos utilizar a informa√ß√£o da fun√ß√£o <code class="highlighter-rouge">printcp(fit_dep)</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Classification tree:
rpart(formula = formula, data = train_dep, method = "class")

Variables actually used in tree construction:
[1] Partido

Root node error: 119/385 = 0.30909

n= 385 

       CP nsplit rel error  xerror     xstd
1 0.67227      0   1.00000 1.00000 0.076197
2 0.02521      1   0.32773 0.35294 0.051404
</code></pre></div></div>

<p>O taxa de erro do conjunto cross-validated (10-fold) pode ser obtida multiplicando-se o <em>Root node error</em> pelo menor valor do <em>xerror</em>, que corresponde ao melhor modelo. Assim, obtemos um erro de 0.1090902, o que nos d√° uma acur√°cia de 0.8909098. No c√≥digo abaixo fa√ßo a sele√ß√£o autom√°tica do modelo com menor erro no conjunto cross-validated e estimo-o novamente com a fun√ß√£o <code class="highlighter-rouge">prune</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sele√ß√£o do modelo com menor erro</span><span class="w">
</span><span class="n">fit_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">prune</span><span class="p">(</span><span class="n">fit_dep</span><span class="p">,</span><span class="w">
                 </span><span class="n">cp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fit_dep</span><span class="o">$</span><span class="n">cptable</span><span class="p">[</span><span class="n">which.min</span><span class="p">(</span><span class="n">fit_dep</span><span class="o">$</span><span class="n">cptable</span><span class="p">[,</span><span class="s2">"xerror"</span><span class="p">]),</span><span class="w">
                                      </span><span class="s2">"CP"</span><span class="p">])</span><span class="w">
</span><span class="n">fit_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">prune</span><span class="p">(</span><span class="n">fit_sen</span><span class="p">,</span><span class="w">
                 </span><span class="n">cp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fit_sen</span><span class="o">$</span><span class="n">cptable</span><span class="p">[</span><span class="n">which.min</span><span class="p">(</span><span class="n">fit_sen</span><span class="o">$</span><span class="n">cptable</span><span class="p">[,</span><span class="s2">"xerror"</span><span class="p">]),</span><span class="w">
                                      </span><span class="s2">"CP"</span><span class="p">])</span><span class="w">
</span></code></pre></div></div>

<p>Uma vez obtido o modelo com o menor erro, podemos utilizar os dados referentes aos parlamentares indecisos para realizar a previs√£o do voto e calcular o percentual de votos a favor com essas novas previs√µes:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Previs√£o do modelo</span><span class="w">
</span><span class="n">prev_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">predict</span><span class="p">(</span><span class="n">fit_dep</span><span class="p">,</span><span class="w"> </span><span class="n">test_dep</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"class"</span><span class="p">)</span><span class="w">
</span><span class="n">prev_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">predict</span><span class="p">(</span><span class="n">fit_sen</span><span class="p">,</span><span class="w"> </span><span class="n">test_sen</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"class"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Previs√£o do percentual de vota√ß√£o a favor</span><span class="w">
</span><span class="n">n_dep_favor</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">train_dep</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">train_dep</span><span class="o">$</span><span class="n">Voto</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A favor"</span><span class="p">),])</span><span class="w">
</span><span class="n">n_sen_favor</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">train_sen</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">train_sen</span><span class="o">$</span><span class="n">Voto</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A favor"</span><span class="p">),])</span><span class="w">
</span><span class="n">n_dep_favor_prev</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="n">prev_dep</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A favor"</span><span class="p">))</span><span class="w">
</span><span class="n">n_sen_favor_prev</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="n">prev_sen</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A favor"</span><span class="p">))</span><span class="w">
</span><span class="n">percentual_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">n_dep_favor</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n_dep_favor_prev</span><span class="p">)</span><span class="o">/</span><span class="n">n_dep</span><span class="w">
</span><span class="n">percentual_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">n_sen_favor</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n_sen_favor_prev</span><span class="p">)</span><span class="o">/</span><span class="n">n_sen</span><span class="w">
</span><span class="n">percentual_dep</span><span class="w">
</span><span class="n">percentual_sen</span><span class="w">
</span></code></pre></div></div>

<p>E o resultado ser√°:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 0.7465887 # C√¢mara dos Deputados
[1] 0.5308642 # Senado Federal
</code></pre></div></div>

<p>Parece que na situa√ß√£o atual, o Impeachment passa pela etapa de admissibilidade mas esbarra no julgamento do Senado Federal.</p>

<h1 id="√°rvores-com-previs√£o">√Årvores com previs√£o</h1>

<p>Para finalizar, vamos construir a √°rvore final que inclui os indecisos e utiliza o modelo simplificado com menor erro de previs√£o:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Altera os dados originais para incluir a previs√£o dos indecisos</span><span class="w">
</span><span class="n">new_dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">deputados</span><span class="w">
</span><span class="n">new_dep</span><span class="p">[</span><span class="nf">names</span><span class="p">(</span><span class="n">prev_dep</span><span class="p">),</span><span class="w"> </span><span class="s2">"Voto"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">prev_dep</span><span class="w">
</span><span class="n">new_sen</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">senadores</span><span class="w">
</span><span class="n">new_sen</span><span class="p">[</span><span class="nf">names</span><span class="p">(</span><span class="n">prev_sen</span><span class="p">),</span><span class="w"> </span><span class="s2">"Voto"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">prev_sen</span><span class="w">

</span><span class="c1"># Constr√µe a √°rvore com os indecisos</span><span class="w">
</span><span class="n">fit_dep_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rpart</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"class"</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_dep</span><span class="p">)</span><span class="w">
</span><span class="n">fit_sen_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rpart</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"class"</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_sen</span><span class="p">)</span><span class="w">

</span><span class="c1"># Plota a √°rvore dos Deputados com os indecisos</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">fit_dep_prev</span><span class="p">,</span><span class="w"> </span><span class="n">uniform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
    </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"√Årvore do Impeachment - C√¢mara (com previs√£o de indecisos)"</span><span class="p">,</span><span class="w">
    </span><span class="n">margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.2</span><span class="p">)</span><span class="w">
</span><span class="n">text</span><span class="p">(</span><span class="n">fit_dep_prev</span><span class="p">,</span><span class="w"> </span><span class="n">use.n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">,</span><span class="w"> </span><span class="n">pretty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">fancy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">minlength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">bg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">)</span><span class="w">
</span><span class="n">mtext</span><span class="p">(</span><span class="s2">"Valores s√£o: A favor/Contra"</span><span class="p">,</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="n">mtext</span><span class="p">(</span><span class="n">paste0</span><span class="p">(</span><span class="s2">"Percentual previsto a favor: "</span><span class="p">,</span><span class="w">
             </span><span class="nf">round</span><span class="p">(</span><span class="n">percentual_dep</span><span class="o">*</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="s2">"%"</span><span class="p">))</span><span class="w">

</span><span class="c1"># Plota a √°rvore dos Senadores com os indecisos</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">fit_sen_prev</span><span class="p">,</span><span class="w"> </span><span class="n">uniform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
    </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"√Årvore do Impeachment - Senado (com previs√£o de indecisos)"</span><span class="p">,</span><span class="w">
    </span><span class="n">margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3</span><span class="p">)</span><span class="w">
</span><span class="n">text</span><span class="p">(</span><span class="n">fit_sen_prev</span><span class="p">,</span><span class="w"> </span><span class="n">use.n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">,</span><span class="w"> </span><span class="n">pretty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">fancy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">minlength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">bg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">)</span><span class="w">
</span><span class="n">mtext</span><span class="p">(</span><span class="s2">"Valores s√£o: A favor/Contra"</span><span class="p">,</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="n">mtext</span><span class="p">(</span><span class="n">paste0</span><span class="p">(</span><span class="s2">"Percentual previsto a favor: "</span><span class="p">,</span><span class="w">
             </span><span class="nf">round</span><span class="p">(</span><span class="n">percentual_sen</span><span class="o">*</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="o">=</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="s2">"%"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>O resultado est√° abaixo:</p>

<p><img src="http://localhost:4000/img/tree_dep_prev.png" alt="" /></p>

<p><img src="http://localhost:4000/img/tree_sen_prev.png" alt="" /></p>

<p>A √°rvore do Senado Federal nos mostra que a maior resist√™ncia ao Impeachment parece ser os partidos do PCdoB, PDT, PMDB, PP, PR, PRB, PSB, PSD, PT e PTB nos Estados AL, AM, AP, BA, MA, PA, PE, PI, PR, RJ, RN, RR, TO. O Impeachment precisa de 54 votos no Senado. Atualmente existem 36 Senadores com inten√ß√£o de voto a favor e 26 contra. Assim, s√£o necess√°rios 18 votos dos 19 indecisos para a Presidente ser destitu√≠da do Cargo, ou ent√£o uma mudan√ßa no voto dos Senadores que se declararam contra o Impeachment.</p>

<p>Podemos visualizar a lista dos Senadores indecisos segundo o site <strong><a href="http://mapa.vemprarua.net/br/">vem pra rua</a></strong> com o comando:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">senadores</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">senadores</span><span class="o">$</span><span class="n">Voto</span><span class="p">)),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>O resultado nos d√°:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>447 &lt;NA&gt;             Acir Gurgacz         PDT     RO       1
448 &lt;NA&gt; Antonio Carlos Valadares         PSB     SE       1
449 &lt;NA&gt;            Ciro Nogueira          PP     PI       1
450 &lt;NA&gt;       Delcidio do Amaral Sem partido     MS       1
451 &lt;NA&gt;           Douglas Cintra         PTB     PE       1
452 &lt;NA&gt;            Elmano Ferrer         PTB     PI       1
453 &lt;NA&gt;  Fernando Bezerra Coelho         PSB     PE       1
454 &lt;NA&gt;               Helio Jose        PMDB     DF       1
455 &lt;NA&gt;       Joao Alberto Souza        PMDB     MA       1
456 &lt;NA&gt;            Jose Maranhao        PMDB     PB       1
457 &lt;NA&gt;              Lucia Vania         PSB     GO       1
458 &lt;NA&gt;         Marcelo Crivella         PRB     RJ       1
459 &lt;NA&gt;                Omar Aziz         PSD     AM       1
460 &lt;NA&gt;            Raimundo Lira        PMDB     PB       1
461 &lt;NA&gt;            Roberto Rocha         PSB     MA       1
462 &lt;NA&gt;                  Romario         PSB     RJ       1
463 &lt;NA&gt;              Romero Juca        PMDB     RR       1
464 &lt;NA&gt;             Sandra Braga        PMDB     AM       1
465 &lt;NA&gt;         Vicentinho Alves          PR     TO       1
</code></pre></div></div>

<h2 id="lidando-com-os-ausentes">Lidando com os ausentes</h2>

<p>A aus√™ncia ou a absten√ß√£o pode trazer uma influ√™ncia grande no resultado da vota√ß√£o, visto que o c√°lculo do percentual √© feito sobre a totalidade dos membros e n√£o apenas sobre os presentes (cr√©dito ao Prof. Bruno Speck da USP por lembrar disto). Assim, decidi fazer uma simula√ß√£o com diferentes taxas de aus√™ncia/absten√ß√£o, onde os deputados e senadores ausentes s√£o selecionados aleatoriamente. Para criar os novos percentuais, basta digitar:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Aus√™ncia de 2,5% dos Deputados</span><span class="w">
</span><span class="n">n_dep_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">floor</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">new_dep</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">0.975</span><span class="p">)</span><span class="w">
</span><span class="n">dep_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">new_dep</span><span class="p">[</span><span class="n">sample</span><span class="p">(</span><span class="nf">seq_len</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">new_dep</span><span class="p">)),</span><span class="w"> </span><span class="n">n_dep_pres</span><span class="p">),]</span><span class="w">

</span><span class="c1"># Aus√™ncia de 2,5% dos Senadores</span><span class="w">
</span><span class="n">n_sen_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">floor</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">new_sen</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">0.975</span><span class="p">)</span><span class="w">
</span><span class="n">dep_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">new_sen</span><span class="p">[</span><span class="n">sample</span><span class="p">(</span><span class="nf">seq_len</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">new_sen</span><span class="p">)),</span><span class="w"> </span><span class="n">n_sen_pres</span><span class="p">),]</span><span class="w">

</span><span class="c1"># Percentual de favor√°veis</span><span class="w">
</span><span class="n">n_dep_favor_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="n">dep_pres</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A favor"</span><span class="p">))</span><span class="w">
</span><span class="n">n_sen_favor_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="n">sen_pres</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A favor"</span><span class="p">))</span><span class="w">
</span><span class="n">percentual_dep_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">n_dep_favor_pres</span><span class="o">/</span><span class="n">n_dep</span><span class="w">
</span><span class="n">percentual_sen_pres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">n_sen_favor_pres</span><span class="o">/</span><span class="n">n_sen</span><span class="w">
</span><span class="n">percentual_dep_pres</span><span class="w">
</span><span class="n">percentual_sen_pres</span><span class="w">
</span></code></pre></div></div>

<p>O percentual de Deputados favor√°veis ao Impeachment quando a absten√ß√£o √© de 2,5% √© de 72,90%, e de Senadores √© 51,85%. Para realizar a an√°lise com outras taxas de absten√ß√£o basta mudar os percentuais. Ainda assim, a acur√°cia da previs√£o depende do fato de que a aus√™ncia seja aleat√≥ria, e n√£o correlacionada com a inten√ß√£o de voto, Partido ou Estado.</p>

<h2 id="atualizando-as-previs√µes">Atualizando as previs√µes</h2>

<p>Como toda previs√£o √© melhor a medida que incorpora a chegada de novas informa√ß√µes, fiz uma rotina para atualizar os resultados dessa previs√£o diariamente e publicar na tabela do in√≠cio deste post.</p>

<p>Tem sugest√µes para melhorar o algoritmo? Tem d√∫vidas sobre a implementa√ß√£o? Encontrou algum typo no texto? Me avise nos coment√°rios ou por email.</p>
:ET